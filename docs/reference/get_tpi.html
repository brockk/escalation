<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get an object to fit the TPI dose-finding model. — get_tpi • escalation</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get an object to fit the TPI dose-finding model. — get_tpi"><meta property="og:description" content="The toxicity probability interval (TPI)is a dose-escalation design
by Ji et al."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">escalation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A100-DoseSelectors.html">Using escalation</a>
    </li>
    <li>
      <a href="../articles/A205-CRM.html">Continual Reassessment Method</a>
    </li>
    <li>
      <a href="../articles/A207-NBG.html">Neuenschwander, Branson &amp; Gsponer</a>
    </li>
    <li>
      <a href="../articles/A210-TPI.html">Toxicity Probability Interval Design</a>
    </li>
    <li>
      <a href="../articles/A220-mTPI.html">Modified Toxicity Probability Interval Design</a>
    </li>
    <li>
      <a href="../articles/A230-BOIN.html">Bayesian Optimal Interval Design</a>
    </li>
    <li>
      <a href="../articles/A600-DosePaths.html">Working with dose-paths</a>
    </li>
    <li>
      <a href="../articles/A700-Simulation.html">Simulating dose-escalation trials</a>
    </li>
    <li>
      <a href="../articles/A710-SimulationComparison.html">Comparing dose-escalation designs by simulation</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/brockk/escalation/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get an object to fit the TPI dose-finding model.</h1>
    <small class="dont-index">Source: <a href="https://github.com/brockk/escalation/blob/HEAD/R/tpi_selector.R" class="external-link"><code>R/tpi_selector.R</code></a></small>
    <div class="hidden name"><code>get_tpi.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The toxicity probability interval (TPI)is a dose-escalation design
by Ji et al.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_tpi</span><span class="op">(</span></span>
<span>  <span class="va">num_doses</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">k1</span>,</span>
<span>  <span class="va">k2</span>,</span>
<span>  <span class="va">exclusion_certainty</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.005</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.005</span>,</span>
<span>  stop_when_deescalation_impossible <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>num_doses</dt>
<dd><p>Number of doses under investigation.</p></dd>


<dt>target</dt>
<dd><p>We seek a dose with this probability of toxicity.</p></dd>


<dt>k1</dt>
<dd><p>The K1 parameter in TPI determines the upper bound of the
equivalence interval. See Details.</p></dd>


<dt>k2</dt>
<dd><p>The K2 parameter in TPI determines the lower bound of the
equivalence interval. See Details.</p></dd>


<dt>exclusion_certainty</dt>
<dd><p>Numeric, threshold posterior certainty required to
exclude a dose for being excessively toxic. The authors discuss values in the
range 0.7 - 0.95. Set to a value &gt; 1 to suppress the dose exclusion
mechanism. The authors use the Greek letter xi for this parameter.</p></dd>


<dt>alpha</dt>
<dd><p>First shape parameter of the beta prior distribution on the
probability of toxicity.</p></dd>


<dt>beta</dt>
<dd><p>Second shape parameter of the beta prior distribution on the
probability of toxicity.</p></dd>


<dt>stop_when_deescalation_impossible</dt>
<dd><p>TRUE to stop a trial and recommend
no dose when the advice is to de-escalate but de-escalation is impossible
because we are already at the lowest dose. Note that this feature was
requested by a user. This param is FALSE by default so that behaviour matches
what was described in the publication. The original authors do advocate this
behaviour.</p></dd>


<dt>...</dt>
<dd><p>Extra args are passed onwards.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>an object of type <code><a href="selector_factory.html">selector_factory</a></code> that can fit the
TPI model to outcomes.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    

<p>The design seeks a dose with probability of toxicity \(p_{i}\)
close to a target probability \(p_{T}\) by iteratively calculating the
interval $$p_{T} - K_{2} \sigma_{i} &lt; p_{i} &lt; p_{T} + K_{1} \sigma_{i}$$
In this model, \(K_{1}\) and \(K_{2}\) are specified constants and
\(\sigma_{i}\) is the standard deviation of \(p_{i}\) arising from a
Bayesian beta-binomial conjugate model
$$p_{i} | data \sim Beta(\alpha + x_{i}, \beta + n_{i} - x_{i}),$$
where \(x_{i}\) is the number of toxicities observed and \(n_{i}\) is the
number of patients treated at dose \(i\), and \(\alpha\) and \(\beta\)
are hyperparameters for the beta prior on \(p_{i}\).
A dose is excluded as inadmissible if
$$P(p_{i} &gt; p_{T} | data) &gt; \xi$$
The trial commences at a starting dose, possibly dose 1. If dose \(i\)
has just been evaluated in patient(s), dose selection decisions proceed by
calculating the posterior probability that the true toxicity rate at dose
\(i\) belongs to the three partition regions
\(p_{i} &lt; p_{T} - K_{2} \sigma_{i}\),
\(p_{T} - K_{2} \sigma_{i} &lt; p_{i} &lt; p_{T} + K_{1} \sigma_{i}\), and
\(p_{i} &gt; p_{T} + K_{2} \sigma_{i}\), corresponding to decisions escalate,
stay, and de-escalate dose, respectively. Further to this are rules that
prevent escalation to an inadmissible dose.
In their paper, the authors demonstrate acceptable operating performance
using \(\alpha = \beta = 0.005\), \(K_{1} = 1\), \(K_{2} = 1.5\) and
\(\xi = 0.95\).
See the publications for full details.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Ji, Y., Li, Y., &amp; Bekele, B. N. (2007).
Dose-finding in phase I clinical trials based on toxicity probability
intervals.
Clinical Trials, 4(3), 235–244. https://doi.org/10.1177/1740774507079442</p>
<p>Ji, Y., &amp; Yang, S. (2017).
On the Interval-Based Dose-Finding Designs, 1–26.
Retrieved from https://arxiv.org/abs/1706.03277</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fl">0.25</span></span></span>
<span class="r-in"><span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu">get_tpi</span><span class="op">(</span>num_doses <span class="op">=</span> <span class="fl">5</span>, target <span class="op">=</span> <span class="va">target</span>, k1 <span class="op">=</span> <span class="fl">1</span>, k2 <span class="op">=</span> <span class="fl">1.5</span>,</span></span>
<span class="r-in"><span>  exclusion_certainty <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="st">'1NNN 2NTN'</span></span></span>
<span class="r-in"><span><span class="va">model1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kristian Brock, Daniel Slade, Michael Sweeting.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

