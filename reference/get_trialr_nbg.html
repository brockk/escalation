<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get an object to fit the NBG dose-finding model using the trialr package. — get_trialr_nbg • escalation</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get an object to fit the NBG dose-finding model using the trialr package. — get_trialr_nbg"><meta name="description" content="This function returns an object that can be used to fit a Neuenschwander,
Branson and Gsponer (NBG) model for dose-finding using methods provided by
the trialr package."><meta property="og:description" content="This function returns an object that can be used to fit a Neuenschwander,
Branson and Gsponer (NBG) model for dose-finding using methods provided by
the trialr package."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">escalation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/A100-DoseSelectors.html">Using escalation</a></li>
    <li><a class="dropdown-item" href="../articles/A205-CRM.html">CRM - Continual Reassessment Method</a></li>
    <li><a class="dropdown-item" href="../articles/A207-NBG.html">NBG - Neuenschwander, Branson &amp; Gsponer</a></li>
    <li><a class="dropdown-item" href="../articles/A210-TPI.html">TPI - Toxicity Probability Interval Design</a></li>
    <li><a class="dropdown-item" href="../articles/A220-mTPI.html">mTPI - Modified Toxicity Probability Interval Design</a></li>
    <li><a class="dropdown-item" href="../articles/A230-BOIN.html">BOIN - Bayesian Optimal Interval Design</a></li>
    <li><a class="dropdown-item" href="../articles/A280-TITE.html">TITE-CRM and TITE-NBG - Time-to-Event Designs</a></li>
    <li><a class="dropdown-item" href="../articles/A310-EfficacyToxicity.html">EffTox, Wages &amp; Tait, and BOIN12 - Efficacy &amp; Toxicity Designs</a></li>
    <li><a class="dropdown-item" href="../articles/A360-Combinations.html">BOIN-COMB - Treatment Combination Designs</a></li>
    <li><a class="dropdown-item" href="../articles/A600-DosePaths.html">Working with dose-paths</a></li>
    <li><a class="dropdown-item" href="../articles/A700-Simulation.html">Simulating dose-escalation trials</a></li>
    <li><a class="dropdown-item" href="../articles/A710-SimulationComparison.html">Comparing dose-escalation designs by simulation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/brockk/escalation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get an object to fit the NBG dose-finding model using the trialr package.</h1>
      <small class="dont-index">Source: <a href="https://github.com/brockk/escalation/blob/master/R/trialr_nbg_selector.R" class="external-link"><code>R/trialr_nbg_selector.R</code></a></small>
      <div class="d-none name"><code>get_trialr_nbg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function returns an object that can be used to fit a Neuenschwander,
Branson and Gsponer (NBG) model for dose-finding using methods provided by
the trialr package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_trialr_nbg</span><span class="op">(</span></span>
<span>  parent_selector_factory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">real_doses</span>,</span>
<span>  <span class="va">d_star</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">alpha_mean</span>,</span>
<span>  <span class="va">alpha_sd</span>,</span>
<span>  <span class="va">beta_mean</span>,</span>
<span>  <span class="va">beta_sd</span>,</span>
<span>  tite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-parent-selector-factory">parent_selector_factory<a class="anchor" aria-label="anchor" href="#arg-parent-selector-factory"></a></dt>
<dd><p>optional object of type
<code><a href="selector_factory.html">selector_factory</a></code> that is in charge of dose selection before
this class gets involved. Leave as NULL to just use this model from the start.</p></dd>


<dt id="arg-real-doses">real_doses<a class="anchor" aria-label="anchor" href="#arg-real-doses"></a></dt>
<dd><p>Doses under investigation, a non-decreasing vector of
numbers.</p></dd>


<dt id="arg-d-star">d_star<a class="anchor" aria-label="anchor" href="#arg-d-star"></a></dt>
<dd><p>Numeric, reference dose for calculating the covariate
<code>log(dose / d_star)</code> when fitting the model. Sometimes (but not always)
taken to be the max dose in real_doses.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>We seek a dose with this probability of toxicity.</p></dd>


<dt id="arg-alpha-mean">alpha_mean<a class="anchor" aria-label="anchor" href="#arg-alpha-mean"></a></dt>
<dd><p>Prior mean of intercept variable for normal prior.
See Details. Also see documentation for trialr package for further details.</p></dd>


<dt id="arg-alpha-sd">alpha_sd<a class="anchor" aria-label="anchor" href="#arg-alpha-sd"></a></dt>
<dd><p>Prior standard deviation of intercept variable for normal prior.
See Details. Also see documentation for trialr package for further details.</p></dd>


<dt id="arg-beta-mean">beta_mean<a class="anchor" aria-label="anchor" href="#arg-beta-mean"></a></dt>
<dd><p>Prior mean of gradient variable for normal prior.
See Details. Also see documentation for trialr package for further details.</p></dd>


<dt id="arg-beta-sd">beta_sd<a class="anchor" aria-label="anchor" href="#arg-beta-sd"></a></dt>
<dd><p>Prior standard deviation of slope variable for normal prior.
See Details. Also see documentation for trialr package for further details.</p></dd>


<dt id="arg-tite">tite<a class="anchor" aria-label="anchor" href="#arg-tite"></a></dt>
<dd><p>FALSE to use regular model; TRUE to use TITE version See
Description.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Extra args are passed to <code><a href="https://rdrr.io/pkg/trialr/man/stan_nbg.html" class="external-link">stan_nbg</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object of type <code><a href="selector_factory.html">selector_factory</a></code> that can fit the
NBG model to outcomes.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The model form implemented in trialr is:</p>
<p>\(F(x_{i}, \alpha, \beta) = 1 / (1 + \exp{-(\alpha + \exp{(\beta)} log(x_i / d_*))}) \)</p>
<p>with normal priors on alpha and beta.</p>
<p>Dose selectors are designed to be daisy-chained together to achieve different
behaviours. This class is a **resumptive** selector, meaning it carries on
when the previous dose selector, where present, has elected not to continue.
For example, this allows instances of this class to be preceded by a selector
that follows a fixed path in an initial escalation plan, such as that
provided by <code><a href="follow_path.html">follow_path</a></code>. In this example, when the observed
trial outcomes deviate from that initial plan, the selector following the
fixed path elects not to continue and responsibility passes to this class.
See examples under <code><a href="get_dfcrm.html">get_dfcrm</a></code>.</p>
<p>A time-to-event variant, like TITE-CRM, is used when you specify
<code>tite = TRUE</code>. This weights the observations to allow dose-selections
based on partially observed outcomes.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Neuenschwander, B., Branson, M., &amp; Gsponer, T. (2008).
Critical aspects of the Bayesian approach to phase I cancer trials.
Statistics in Medicine, 27, 2420–2439. https://doi.org/10.1002/sim.3230</p>
<p>Brock, K. (2020). trialr: Clinical Trial Designs in 'rstan'.
R package version 0.1.5. https://github.com/brockk/trialr</p>
<p>Brock, K. (2019). trialr: Bayesian Clinical Trial Designs in R and Stan.
arXiv preprint arXiv:1907.00161.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">real_doses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">40</span>, <span class="fl">60</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d_star</span> <span class="op">&lt;-</span> <span class="fl">60</span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fl">0.25</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">get_trialr_nbg</span><span class="op">(</span>real_doses <span class="op">=</span> <span class="va">real_doses</span>, d_star <span class="op">=</span> <span class="va">d_star</span>,</span></span>
<span class="r-in"><span>                        target <span class="op">=</span> <span class="va">target</span>,</span></span>
<span class="r-in"><span>                        alpha_mean <span class="op">=</span> <span class="fl">2</span>, alpha_sd <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                        beta_mean <span class="op">=</span> <span class="fl">0.5</span>, beta_sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Refer to the trialr documentation for more details on model &amp; priors.</span></span></span>
<span class="r-in"><span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="st">'1NNN 2NTN'</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="mean_prob_tox.html">mean_prob_tox</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1223751 0.2525248 0.5696365 0.7338184 0.8335071</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kristian Brock, Daniel Slade, Michael Sweeting.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

