<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Dose selector. — selector • escalation</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dose selector. — selector"><meta name="description" content="This is a core class in this package. It encapsulates that an object (e.g. a
CRM model, a 3+3 model) is able to recommend doses, keep track of how many
patients have been treated at what doses, what toxicity outcomes have been
seen, and whether a trial should continue. It offers a consistent interface
to many dose-finding methods, including CRM, TPI, mTPI, BOIN, EffTox, 3+3,
and more.
Once you have a standardised interface, modularisation offers a powerful way
to adorn dose-finding methods with extra desirable behaviour. selector
objects can be daisy-chained togther using magrittr's pipe operator.
For instance, the CRM fitting method in dfcrm is fantastic because it
runs quickly and is simple to call. However, it does not recommend that a
trial stops if a dose is too toxic or if n patients have already been treated
at the recommended dose. Each of these behaviours can be bolted on via
additional selectors. Furthermore, those behaviours and more can be bolted
on to any dose selector because of the modular approach implemented in
escalation. See Examples.
selector objects are obtained by calling the fit
function on a selector_factory object.
A selector_factory object is obtained by initially calling a
function like get_dfcrm, get_three_plus_three or
get_boin. Users may then add desired extra behaviour with
subsequent calls to functions like stop_when_n_at_dose or
stop_when_too_toxic.
The selector class also supports that an object will be able to
perform inferential calculations on the rates of toxicity via functions like
mean_prob_tox, median_prob_tox, and
prob_tox_exceeds. However, naturally the sophistication of
those calculations will vary by model implementation. For example, a full
MCMC method will be able to quantify any probability you like by working with
posterior samples. In contrast, a method like the crm
function in dfcrm that uses the plug-in method to estimate posterior
dose-toxicity curves cannot natively estimate the median probability of tox."><meta property="og:description" content="This is a core class in this package. It encapsulates that an object (e.g. a
CRM model, a 3+3 model) is able to recommend doses, keep track of how many
patients have been treated at what doses, what toxicity outcomes have been
seen, and whether a trial should continue. It offers a consistent interface
to many dose-finding methods, including CRM, TPI, mTPI, BOIN, EffTox, 3+3,
and more.
Once you have a standardised interface, modularisation offers a powerful way
to adorn dose-finding methods with extra desirable behaviour. selector
objects can be daisy-chained togther using magrittr's pipe operator.
For instance, the CRM fitting method in dfcrm is fantastic because it
runs quickly and is simple to call. However, it does not recommend that a
trial stops if a dose is too toxic or if n patients have already been treated
at the recommended dose. Each of these behaviours can be bolted on via
additional selectors. Furthermore, those behaviours and more can be bolted
on to any dose selector because of the modular approach implemented in
escalation. See Examples.
selector objects are obtained by calling the fit
function on a selector_factory object.
A selector_factory object is obtained by initially calling a
function like get_dfcrm, get_three_plus_three or
get_boin. Users may then add desired extra behaviour with
subsequent calls to functions like stop_when_n_at_dose or
stop_when_too_toxic.
The selector class also supports that an object will be able to
perform inferential calculations on the rates of toxicity via functions like
mean_prob_tox, median_prob_tox, and
prob_tox_exceeds. However, naturally the sophistication of
those calculations will vary by model implementation. For example, a full
MCMC method will be able to quantify any probability you like by working with
posterior samples. In contrast, a method like the crm
function in dfcrm that uses the plug-in method to estimate posterior
dose-toxicity curves cannot natively estimate the median probability of tox."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">escalation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/A100-DoseSelectors.html">Using escalation</a></li>
    <li><a class="dropdown-item" href="../articles/A205-CRM.html">CRM - Continual Reassessment Method</a></li>
    <li><a class="dropdown-item" href="../articles/A207-NBG.html">NBG - Neuenschwander, Branson &amp; Gsponer</a></li>
    <li><a class="dropdown-item" href="../articles/A210-TPI.html">TPI - Toxicity Probability Interval Design</a></li>
    <li><a class="dropdown-item" href="../articles/A220-mTPI.html">mTPI - Modified Toxicity Probability Interval Design</a></li>
    <li><a class="dropdown-item" href="../articles/A230-BOIN.html">BOIN - Bayesian Optimal Interval Design</a></li>
    <li><a class="dropdown-item" href="../articles/A280-TITE.html">TITE-CRM and TITE-NBG - Time-to-Event Designs</a></li>
    <li><a class="dropdown-item" href="../articles/A310-EfficacyToxicity.html">EffTox, Wages &amp; Tait, and BOIN12 - Efficacy &amp; Toxicity Designs</a></li>
    <li><a class="dropdown-item" href="../articles/A360-Combinations.html">BOIN-COMB - Treatment Combination Designs</a></li>
    <li><a class="dropdown-item" href="../articles/A600-DosePaths.html">Working with dose-paths</a></li>
    <li><a class="dropdown-item" href="../articles/A700-Simulation.html">Simulating dose-escalation trials</a></li>
    <li><a class="dropdown-item" href="../articles/A710-SimulationComparison.html">Comparing dose-escalation designs by simulation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/brockk/escalation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Dose selector.</h1>
      <small class="dont-index">Source: <a href="https://github.com/brockk/escalation/blob/master/R/selector.R" class="external-link"><code>R/selector.R</code></a></small>
      <div class="d-none name"><code>selector.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a core class in this package. It encapsulates that an object (e.g. a
CRM model, a 3+3 model) is able to recommend doses, keep track of how many
patients have been treated at what doses, what toxicity outcomes have been
seen, and whether a trial should continue. It offers a consistent interface
to many dose-finding methods, including CRM, TPI, mTPI, BOIN, EffTox, 3+3,
and more.</p>
<p>Once you have a standardised interface, modularisation offers a powerful way
to adorn dose-finding methods with extra desirable behaviour. <code>selector</code>
objects can be daisy-chained togther using <code>magrittr</code>'s pipe operator.
For instance, the CRM fitting method in <code>dfcrm</code> is fantastic because it
runs quickly and is simple to call. However, it does not recommend that a
trial stops if a dose is too toxic or if n patients have already been treated
at the recommended dose. Each of these behaviours can be bolted on via
additional selectors. Furthermore, those behaviours and more can be bolted
on to any dose selector because of the modular approach implemented in
<code>escalation</code>. See Examples.</p>
<p><code>selector</code> objects are obtained by calling the <code><a href="fit.html">fit</a></code>
function on a <code><a href="selector_factory.html">selector_factory</a></code> object.
A <code><a href="selector_factory.html">selector_factory</a></code> object is obtained by initially calling a
function like <code><a href="get_dfcrm.html">get_dfcrm</a></code>, <code><a href="get_three_plus_three.html">get_three_plus_three</a></code> or
<code><a href="get_boin.html">get_boin</a></code>. Users may then add desired extra behaviour with
subsequent calls to functions like <code><a href="stop_when_n_at_dose.html">stop_when_n_at_dose</a></code> or
<code><a href="stop_when_too_toxic.html">stop_when_too_toxic</a></code>.</p>
<p>The <code>selector</code> class also supports that an object will be able to
perform inferential calculations on the rates of toxicity via functions like
<code><a href="mean_prob_tox.html">mean_prob_tox</a></code>, <code><a href="median_prob_tox.html">median_prob_tox</a></code>, and
<code><a href="prob_tox_exceeds.html">prob_tox_exceeds</a></code>. However, naturally the sophistication of
those calculations will vary by model implementation. For example, a full
MCMC method will be able to quantify any probability you like by working with
posterior samples. In contrast, a method like the <code><a href="https://rdrr.io/pkg/dfcrm/man/crm.html" class="external-link">crm</a></code>
function in <code>dfcrm</code> that uses the plug-in method to estimate posterior
dose-toxicity curves cannot natively estimate the median probability of tox.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">selector</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Every <code>selector</code> object implements the following functions:</p><ul><li><p><code><a href="tox_target.html">tox_target</a></code></p></li>
<li><p><code><a href="num_patients.html">num_patients</a></code></p></li>
<li><p><code><a href="cohort.html">cohort</a></code></p></li>
<li><p><code><a href="doses_given.html">doses_given</a></code></p></li>
<li><p><code><a href="tox.html">tox</a></code></p></li>
<li><p><code><a href="num_tox.html">num_tox</a></code></p></li>
<li><p><code><a href="model_frame.html">model_frame</a></code></p></li>
<li><p><code><a href="num_doses.html">num_doses</a></code></p></li>
<li><p><code><a href="dose_indices.html">dose_indices</a></code></p></li>
<li><p><code><a href="dose_strings.html">dose_strings</a></code></p></li>
<li><p><code><a href="recommended_dose.html">recommended_dose</a></code></p></li>
<li><p><code><a href="continue.html">continue</a></code></p></li>
<li><p><code><a href="n_at_dose.html">n_at_dose</a></code></p></li>
<li><p><code><a href="n_at_recommended_dose.html">n_at_recommended_dose</a></code></p></li>
<li><p><code><a href="is_randomising.html">is_randomising</a></code></p></li>
<li><p><code><a href="prob_administer.html">prob_administer</a></code></p></li>
<li><p><code><a href="tox_at_dose.html">tox_at_dose</a></code></p></li>
<li><p><code><a href="empiric_tox_rate.html">empiric_tox_rate</a></code></p></li>
<li><p><code><a href="mean_prob_tox.html">mean_prob_tox</a></code></p></li>
<li><p><code><a href="median_prob_tox.html">median_prob_tox</a></code></p></li>
<li><p><code><a href="dose_admissible.html">dose_admissible</a></code></p></li>
<li><p><code><a href="prob_tox_quantile.html">prob_tox_quantile</a></code></p></li>
<li><p><code><a href="prob_tox_exceeds.html">prob_tox_exceeds</a></code></p></li>
<li><p><code><a href="supports_sampling.html">supports_sampling</a></code></p></li>
<li><p><code><a href="prob_tox_samples.html">prob_tox_samples</a></code></p></li>
</ul><p>Some selectors also add:</p><ul><li><p><code><a href="tox_limit.html">tox_limit</a></code></p></li>
<li><p><code><a href="eff_limit.html">eff_limit</a></code></p></li>
<li><p><code><a href="eff.html">eff</a></code></p></li>
<li><p><code><a href="num_eff.html">num_eff</a></code></p></li>
<li><p><code><a href="eff_at_dose.html">eff_at_dose</a></code></p></li>
<li><p><code><a href="empiric_eff_rate.html">empiric_eff_rate</a></code></p></li>
<li><p><code><a href="mean_prob_eff.html">mean_prob_eff</a></code></p></li>
<li><p><code><a href="median_prob_eff.html">median_prob_eff</a></code></p></li>
<li><p><code><a href="prob_eff_quantile.html">prob_eff_quantile</a></code></p></li>
<li><p><code><a href="prob_tox_exceeds.html">prob_eff_exceeds</a></code></p></li>
<li><p><code><a href="prob_tox_samples.html">prob_eff_samples</a></code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="selector_factory.html">selector_factory</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Start with a simple CRM model</span></span></span>
<span class="r-in"><span><span class="va">skeleton</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.25</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fl">0.25</span></span></span>
<span class="r-in"><span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_dfcrm.html">get_dfcrm</a></span><span class="op">(</span>skeleton <span class="op">=</span> <span class="va">skeleton</span>, target <span class="op">=</span> <span class="va">target</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add a rule to stop when 9 patients are treated at the recommended dose</span></span></span>
<span class="r-in"><span><span class="va">model2</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_dfcrm.html">get_dfcrm</a></span><span class="op">(</span>skeleton <span class="op">=</span> <span class="va">skeleton</span>, target <span class="op">=</span> <span class="va">target</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="stop_when_n_at_dose.html">stop_when_n_at_dose</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">9</span>, dose <span class="op">=</span> <span class="st">'recommended'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add a rule to stop if toxicity rate at lowest dose likely exceeds target</span></span></span>
<span class="r-in"><span><span class="va">model3</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_dfcrm.html">get_dfcrm</a></span><span class="op">(</span>skeleton <span class="op">=</span> <span class="va">skeleton</span>, target <span class="op">=</span> <span class="va">target</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="stop_when_n_at_dose.html">stop_when_n_at_dose</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">9</span>, dose <span class="op">=</span> <span class="st">'recommended'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="stop_when_too_toxic.html">stop_when_too_toxic</a></span><span class="op">(</span>dose <span class="op">=</span> <span class="fl">1</span>, tox_threshold <span class="op">=</span> <span class="va">target</span>, confidence <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We now have three CRM models that differ in their stopping behaviour.</span></span></span>
<span class="r-in"><span><span class="co"># Let's fit each to some outcomes to see those differences:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="st">'1NNN 2NTT 1NNT'</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="va">model1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="va">model2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit3</span> <span class="op">&lt;-</span> <span class="va">model3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span><span class="va">fit3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="co"># Already model3 wants to stop because of excessive toxicity.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's carry on with models 1 and 2 by adding another cohort:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="st">'1NNN 2NTT 1NNT 1NNN'</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="va">model1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="va">model2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model1 wants to continue - in fact it will never stop.</span></span></span>
<span class="r-in"><span><span class="co"># In contrast, model2 has seen 9 at dose 1 so, rather than suggest dose 1</span></span></span>
<span class="r-in"><span><span class="co"># again, it suggests the trial should stop.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For contrast, let us consider a BOIN model on the same outcomes</span></span></span>
<span class="r-in"><span><span class="va">boin_fitter</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_boin.html">get_boin</a></span><span class="op">(</span>num_doses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">skeleton</span><span class="op">)</span>, target <span class="op">=</span> <span class="va">target</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit4</span> <span class="op">&lt;-</span> <span class="va">boin_fitter</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="fit.html">fit</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit4</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span><span class="va">fit4</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Full selector interface:</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="va">fit2</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="tox_target.html">tox_target</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.25</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="num_patients.html">num_patients</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 12</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="cohort.html">cohort</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 1 1 2 2 2 3 3 3 4 4 4</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="doses_given.html">doses_given</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 1 1 2 2 2 1 1 1 1 1 1</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="tox.html">tox</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0 0 0 0 1 1 0 0 1 0 0 0</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="weight.html">weight</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="num_tox.html">num_tox</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="model_frame.html">model_frame</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    patient cohort  dose   tox weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>       1      1     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>       2      1     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>       3      1     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>       4      2     2     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>       5      2     2     1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>       6      2     2     1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>       7      3     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>       8      3     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>       9      3     1     1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>      10      4     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>      11      4     1     0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>      12      4     1     0      1</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="num_doses.html">num_doses</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="dose_indices.html">dose_indices</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="dose_strings.html">dose_strings</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1" "2" "3" "4" "5"</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="recommended_dose.html">recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="continue.html">continue</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="n_at_dose.html">n_at_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 9 3 0 0 0</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="n_at_recommended_dose.html">n_at_recommended_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 9</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="is_randomising.html">is_randomising</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="prob_administer.html">prob_administer</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1    2    3    4    5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.75 0.25 0.00 0.00 0.00 </span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="tox_at_dose.html">tox_at_dose</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 0 0 0</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="empiric_tox_rate.html">empiric_tox_rate</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1111111 0.6666667       NaN       NaN       NaN</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="mean_prob_tox.html">mean_prob_tox</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.2069561 0.2979677 0.4824122 0.6176620 0.7644430</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="median_prob_tox.html">median_prob_tox</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.2069561 0.2979677 0.4824122 0.6176620 0.7644430</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="dose_admissible.html">dose_admissible</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE TRUE TRUE TRUE</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="prob_tox_quantile.html">prob_tox_quantile</a></span><span class="op">(</span><span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3649670 0.4608277 0.6272346 0.7346974 0.8420860</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="prob_tox_exceeds.html">prob_tox_exceeds</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.009230096 0.054695783 0.442521884 0.851725376 0.996745367</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="supports_sampling.html">supports_sampling</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="prob_tox_samples.html">prob_tox_samples</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,000 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .draw     `1`    `2`    `3`   `4`   `5`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 1     0.005<span style="text-decoration: underline;">85</span> 0.019<span style="text-decoration: underline;">2</span> 0.092<span style="text-decoration: underline;">6</span> 0.207 0.416</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2     0.170   0.256  0.440  0.581 0.739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 3     0.190   0.279  0.464  0.602 0.753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 4     0.053<span style="text-decoration: underline;">9</span>  0.106  0.259  0.409 0.608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 5     0.055<span style="text-decoration: underline;">7</span>  0.109  0.263  0.414 0.611</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 6     0.339   0.435  0.606  0.718 0.831</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 7     0.101   0.171  0.346  0.496 0.676</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 8     0.125   0.202  0.382  0.530 0.702</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 9     0.200   0.290  0.474  0.611 0.760</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 10    0.171   0.257  0.442  0.583 0.740</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,990 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kristian Brock, Daniel Slade, Michael Sweeting.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

