<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>A sample of patients to use in simulations. — PatientSample • escalation</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="A sample of patients to use in simulations. — PatientSample"><meta property="og:description" content="Class to house the latent random variables that govern toxicity and efficacy
events in patients. Instances of this class can be used in simulation-like
tasks to effectively use the same simulated individuals in different designs,
thus supporting reduced Monte Carlo error and more efficient comparison."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">escalation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A100-DoseSelectors.html">Using escalation</a>
    </li>
    <li>
      <a href="../articles/A205-CRM.html">Continual Reassessment Method</a>
    </li>
    <li>
      <a href="../articles/A207-NBG.html">Neuenschwander, Branson &amp; Gsponer</a>
    </li>
    <li>
      <a href="../articles/A210-TPI.html">Toxicity Probability Interval Design</a>
    </li>
    <li>
      <a href="../articles/A220-mTPI.html">Modified Toxicity Probability Interval Design</a>
    </li>
    <li>
      <a href="../articles/A230-BOIN.html">Bayesian Optimal Interval Design</a>
    </li>
    <li>
      <a href="../articles/A600-DosePaths.html">Working with dose-paths</a>
    </li>
    <li>
      <a href="../articles/A700-Simulation.html">Simulating dose-escalation trials</a>
    </li>
    <li>
      <a href="../articles/A710-SimulationComparison.html">Comparing dose-escalation designs by simulation</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/brockk/escalation/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A sample of patients to use in simulations.</h1>
    <small class="dont-index">Source: <a href="https://github.com/brockk/escalation/blob/master/R/patient_sample.R" class="external-link"><code>R/patient_sample.R</code></a></small>
    <div class="hidden name"><code>PatientSample.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Class to house the latent random variables that govern toxicity and efficacy
events in patients. Instances of this class can be used in simulation-like
tasks to effectively use the same simulated individuals in different designs,
thus supporting reduced Monte Carlo error and more efficient comparison.</p>
    </div>


    <div id="references">
    <h2>References</h2>
    <p>Sweeting, M., Slade, D., Jackson, D., &amp; Brock, K. (2024).
Potential outcome simulation for efficient head-to-head comparison of
adaptive dose-finding designs. arXiv preprint arXiv:2402.15460</p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>num_patients</code></dt>
<dd><p>(`integer(1)`)<br></p></dd>


<dt><code>tox_u</code></dt>
<dd><p>(`numeric(num_patients)`)<br></p></dd>


<dt><code>time_to_tox_func</code></dt>
<dd><p>(`function`)<br></p></dd>


<dt><code>tox_time</code></dt>
<dd><p>(`numeric(num_patients)`)<br></p></dd>


<dt><code>eff_u</code></dt>
<dd><p>(`numeric(num_patients)`)<br></p></dd>


<dt><code>time_to_eff_func</code></dt>
<dd><p>(`function`)<br></p></dd>


<dt><code>eff_time</code></dt>
<dd><p>(`numeric(num_patients)`)<br></p></dd>


<dt><code>can_grow</code></dt>
<dd><p>(`logical(1)`)<br></p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-PatientSample-new"><code>PatientSample$new()</code></a></p></li>
<li><p><a href="#method-PatientSample-set_eff_and_tox"><code>PatientSample$set_eff_and_tox()</code></a></p></li>
<li><p><a href="#method-PatientSample-expand_to"><code>PatientSample$expand_to()</code></a></p></li>
<li><p><a href="#method-PatientSample-get_tox_u"><code>PatientSample$get_tox_u()</code></a></p></li>
<li><p><a href="#method-PatientSample-get_patient_tox"><code>PatientSample$get_patient_tox()</code></a></p></li>
<li><p><a href="#method-PatientSample-get_eff_u"><code>PatientSample$get_eff_u()</code></a></p></li>
<li><p><a href="#method-PatientSample-get_patient_eff"><code>PatientSample$get_patient_eff()</code></a></p></li>
<li><p><a href="#method-PatientSample-clone"><code>PatientSample$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-PatientSample-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creator.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/PatientSample.html">PatientSample</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  num_patients <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  time_to_tox_func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  time_to_eff_func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>num_patients</code></dt>
<dd><p>(`integer(1)`) Number of patients.</p></dd>


<dt><code>time_to_tox_func</code></dt>
<dd><p>(`function`) function taking no args that returns
a single time of toxicity, given that toxicity occurs.</p></dd>


<dt><code>time_to_eff_func</code></dt>
<dd><p>(`function`) function taking no args that returns
a single time of efficacy, given that efficacy occurs.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>[PatientSample].</p>
</div>

</div><p></p><hr><a id="method-PatientSample-set_eff_and_tox"></a><div class="section">
<h3 id="method-set-eff-and-tox-">Method <code>set_eff_and_tox()</code><a class="anchor" aria-label="anchor" href="#method-set-eff-and-tox-"></a></h3>
<p>Set the toxicity and efficacy latent variables that govern occurrence of
toxicity and efficacy events. By default, instances of this class
automatically grow these latent variables to accommodate arbitrarily high
sample sizes. However, when you set these latent variables manually via
this function, you override the ability of the class to self-manage, so
its ability to grow is turned off by setting the internal variable
<code>self$can_grow &lt;- FALSE</code>.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">set_eff_and_tox</span><span class="op">(</span></span>
<span>  <span class="va">tox_u</span>,</span>
<span>  <span class="va">eff_u</span>,</span>
<span>  tox_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">tox_u</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  eff_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">eff_u</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>tox_u</code></dt>
<dd><p>(`numeric()`) Patient-level toxicity propensities.</p></dd>


<dt><code>eff_u</code></dt>
<dd><p>(`numeric()`) Patient-level efficacy propensities.</p></dd>


<dt><code>tox_time</code></dt>
<dd><p>(`numeric()`) Patient-level toxicity times, given that
toxicity occurs.</p></dd>


<dt><code>eff_time</code></dt>
<dd><p>(`numeric()`) Patient-level efficacy times, given that
efficacy occurs.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PatientSample-expand_to"></a><div class="section">
<h3 id="method-expand-to-">Method <code>expand_to()</code><a class="anchor" aria-label="anchor" href="#method-expand-to-"></a></h3>
<p>Expand sample to size at least num_patients</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">expand_to</span><span class="op">(</span><span class="va">num_patients</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>num_patients</code></dt>
<dd><p>(`integer(1)`).</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PatientSample-get_tox_u"></a><div class="section">
<h3 id="method-get-tox-u-">Method <code>get_tox_u()</code><a class="anchor" aria-label="anchor" href="#method-get-tox-u-"></a></h3>
<p>Get toxicity latent variable for patient i</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">get_tox_u</span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>i</code></dt>
<dd><p>(`integer(1)`) patient index</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PatientSample-get_patient_tox"></a><div class="section">
<h3 id="method-get-patient-tox-">Method <code>get_patient_tox()</code><a class="anchor" aria-label="anchor" href="#method-get-patient-tox-"></a></h3>
<p>Get 0 or 1 event marker for whether toxicity occurred in patient i</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">get_patient_tox</span><span class="op">(</span><span class="va">i</span>, <span class="va">prob_tox</span>, time <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>i</code></dt>
<dd><p>(`integer(1)`) patient index</p></dd>


<dt><code>prob_tox</code></dt>
<dd><p>(`numeric(1)`) probability of toxicity</p></dd>


<dt><code>time</code></dt>
<dd><p>(`numeric(1)`) at time</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PatientSample-get_eff_u"></a><div class="section">
<h3 id="method-get-eff-u-">Method <code>get_eff_u()</code><a class="anchor" aria-label="anchor" href="#method-get-eff-u-"></a></h3>
<p>Get efficacy latent variable for patient i</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">get_eff_u</span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>i</code></dt>
<dd><p>(`integer(1)`) patient index</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PatientSample-get_patient_eff"></a><div class="section">
<h3 id="method-get-patient-eff-">Method <code>get_patient_eff()</code><a class="anchor" aria-label="anchor" href="#method-get-patient-eff-"></a></h3>
<p>Get 0 or 1 event marker for whether efficacy occurred in patient i</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">get_patient_eff</span><span class="op">(</span><span class="va">i</span>, <span class="va">prob_eff</span>, time <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>i</code></dt>
<dd><p>(`integer(1)`) patient index</p></dd>


<dt><code>prob_eff</code></dt>
<dd><p>(`numeric(1)`) probability of efficacy</p></dd>


<dt><code>time</code></dt>
<dd><p>(`numeric(1)`) at time</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PatientSample-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PatientSample</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kristian Brock, Daniel Slade, Michael Sweeting.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

